# Implementation Plan

## Phase 1: 前期製作與原型驗證 (2025/Q4)

### 1. 專案初始化與環境設定

- [ ] 1.1 建立開發環境
  - **您手動執行：** 在本機安裝 Godot Engine 4.x 版本
  - **您手動執行：** 學習 Godot 引擎的基礎操作（場景、節點、GDScript 語法）
  - **您手動執行：** 研究彈幕遊戲的常見設計模式與開源範例
  - _Requirements: 1.1, 1.2_

- [ ] 1.2 專案檔案結構建立
  - **您手動執行：** 在本機建立 Godot 專案檔案結構
  - **您手動執行：** 初始化 GitHub Repository，並設定 Godot 專用的 .gitignore 檔案
  - **您手動執行：** 設定 GitHub Projects 看板，用於追蹤 CCPM 流程
  - _Requirements: 8.1, 8.2_

### 2. 核心移動系統實作

- [ ] 2.1 玩家基礎控制器
  - **Claude code 執行：** 創建 PlayerController 場景和腳本
  - **Claude code 執行：** 實現八方向移動系統
  - **Claude code 執行：** 實現基礎的輸入處理邏輯
  - _Requirements: 1.1, 1.2_

- [ ] 2.2 閃避系統實作
  - **Claude code 執行：** 實現側跳 (Dodge) 動作系統
  - **Claude code 執行：** 添加短暫的無敵幀計時機制
  - **Claude code 執行：** 實現閃避冷卻時間控制
  - _Requirements: 1.3_

- [ ] 2.3 測試場景建立
  - **您手動執行：** 搭建一個用於測試移動的「灰盒 (Graybox)」場景
  - **您手動執行：** 測試移動手感並調整參數
  - _Requirements: 1.1, 1.3_

### 3. 基礎戰鬥系統

- [ ] 3.1 攻擊系統實作
  - **Claude code 執行：** 實現點擊滑鼠發射基礎的「普通攻擊」子彈
  - **Claude code 執行：** 建立可重複使用的子彈場景 (Scene)，包含移動與碰撞邏輯
  - **Claude code 執行：** 實現子彈物件池系統以優化性能
  - _Requirements: 1.2, 3.1_

- [ ] 3.2 基礎敵人系統
  - **Claude code 執行：** 撰寫基礎敵人腳本，包含被擊中後的反應（例如：消失）
  - **Claude code 執行：** 實現敵人生成和管理系統
  - **Claude code 執行：** 添加敵人 HP 系統和死亡處理
  - _Requirements: 3.2, 3.5_

### 4. 敵人 AI 與彈幕系統

- [ ] 4.1 敵人移動 AI
  - **Claude code 執行：** 擴充敵人腳本，加入簡易的移動邏輯（例如：左右巡邏或緩慢追蹤玩家）
  - **Claude code 執行：** 實現敵人面向玩家的邏輯
  - **Claude code 執行：** 添加多種移動模式（巡邏、追蹤、靜止等）
  - _Requirements: 3.1, 3.2_

- [ ] 4.2 基礎彈幕系統
  - **Claude code 執行：** 實現敵人簡易 AI (例如：面向玩家，定時發射單一彈幕)
  - **Claude code 執行：** 創建彈幕模式生成器，支援直線、散射等基本模式
  - **Claude code 執行：** 實現彈幕碰撞檢測系統
  - _Requirements: 3.3, 3.4_

- [ ] 4.3 彈幕系統測試與調整
  - **您手動執行：** 反覆測試，調整彈幕速度與頻率，獲得初步的遊戲手感
  - **您手動執行：** 測試不同彈幕模式的視覺效果和挑戰性
  - _Requirements: 3.3, 3.4_

### 5. 資源管理系統

- [ ] 5.1 核心數值系統
  - **Claude code 執行：** 建立玩家的核心數值系統 (HP / SP / Cost) 腳本
  - **Claude code 執行：** 實現資源數值的修改和限制邏輯
  - **Claude code 執行：** 添加資源自動回復機制（SP 自動回復）
  - _Requirements: 2.1, 2.2, 2.3_

- [ ] 5.2 受擊系統
  - **Claude code 執行：** 實現受擊偵測，並觸發「無強韌」的後仰硬直狀態
  - **Claude code 執行：** 實現 HP 歸零時的關卡重置邏輯
  - **Claude code 執行：** 添加無敵幀系統防止連續受擊
  - _Requirements: 1.4, 2.2_

- [ ] 5.3 HUD 介面系統
  - **Claude code 執行：** 建立功能性的 HUD 場景，並撰寫腳本使其能綁定並顯示 HP / SP / Cost 的即時數值
  - **Claude code 執行：** 實現資源條的視覺更新邏輯
  - **Claude code 執行：** 添加資源不足時的視覺提示
  - _Requirements: 7.2, 7.3_

### 6. 道具與召喚獸系統

- [ ] 6.1 道具系統基礎
  - **Claude code 執行：** 實現基礎道具系統（HP/SP 恢復道具）
  - **Claude code 執行：** 實現 Cost 消耗機制和道具使用限制
  - **Claude code 執行：** 添加道具效果的即時應用邏輯
  - _Requirements: 2.4, 2.5_

- [ ] 6.2 水晶收集系統
  - **Claude code 執行：** 實現敵人死亡掉落水晶的機制
  - **Claude code 執行：** 實現水晶收集和計數系統
  - **Claude code 執行：** 添加水晶的視覺效果和音效觸發點
  - _Requirements: 4.1, 4.2_

- [ ] 6.3 召喚獸系統
  - **Claude code 執行：** 實現基礎召喚獸系統（消耗水晶召喚）
  - **Claude code 執行：** 創建召喚獸 AI 和自動攻擊邏輯
  - **Claude code 執行：** 實現召喚獸持續時間和自動消失機制
  - _Requirements: 4.3, 4.4_

## Phase 2: 垂直切片開發 (MVP) (2026/Q1-Q2)

### 7. 前期研究與準備

- [ ] 7.1 角色設計與概念
  - **您手動執行 + AI 工具協作：** 確定第一位主角的職業（例如：法師），並與 AI 討論其核心技能的概念與視覺風格
  - **您手動執行 + AI 工具協作：** 設計角色的背景故事和性格特點
  - **您手動執行 + AI 工具協作：** 確定角色在遊戲中的獨特玩法機制
  - _Requirements: 6.1, 6.2_

- [ ] 7.2 美術風格定義
  - **您手動執行 + AI 工具協作：** 蒐集像素美術參考資料，與 AI 美術工具確立 MVP 階段的角色、場景、UI 的具體風格
  - **您手動執行 + AI 工具協作：** 創建美術風格指南和色彩配置
  - **您手動執行 + AI 工具協作：** 設計角色、敵人、UI 元素的像素藝術
  - _Requirements: 9.1, 9.2_

- [ ] 7.3 劇情大綱設計
  - **您手動執行 + AI 工具協作：** 與 AI 劇情工具協作，確立第一章的詳細故事大綱、關鍵事件與角色對話草稿
  - **您手動執行 + AI 工具協作：** 設計劇情分支和玩家選擇點
  - **您手動執行 + AI 工具協作：** 撰寫角色對話和旁白文本
  - _Requirements: 5.1, 5.2, 5.3_

- [ ] 7.4 音效與音樂規劃
  - **您手動執行 + AI 工具協作：** 尋找適合的音效庫資源，並與 AI 音樂工具討論 BGM 的改編方向
  - **您手動執行：** 收集和整理 FEZ 原版 BGM 資源
  - **您手動執行 + AI 工具協作：** 規劃音效設計和音樂改編計畫
  - _Requirements: 9.3, 9.4_

### 8. 職業技能系統實作

- [ ] 8.1 技能系統架構
  - **Claude code 執行：** 實現基礎技能系統架構，支援多職業和技能配置
  - **Claude code 執行：** 創建技能數據結構和載入系統
  - **Claude code 執行：** 實現技能冷卻時間和資源消耗管理
  - _Requirements: 6.1, 6.2, 6.3_

- [ ] 8.2 第一位主角技能實作
  - **Claude code 執行：** 根據 FEZ 原版設計實現第一位主角的完整技能組
  - **Claude code 執行：** 實現技能的施法前搖動畫和無法移動機制
  - **Claude code 執行：** 添加技能的視覺特效和彈幕模式
  - _Requirements: 1.5, 6.4_

- [ ] 8.3 技能平衡調整
  - **您手動執行：** 測試技能的威力、消耗和冷卻時間平衡性
  - **您手動執行 + Claude code 執行：** 根據測試結果調整技能數值
  - **您手動執行：** 驗證技能組合的戰術深度和趣味性
  - _Requirements: 6.4_

### 9. 關卡系統開發

- [ ] 9.1 關卡架構設計
  - **Claude code 執行：** 實現關卡載入和管理系統
  - **Claude code 執行：** 創建關卡配置數據結構（攻擊、防守、護送模式）
  - **Claude code 執行：** 實現關卡目標檢測和完成判定
  - _Requirements: 5.4, 5.5, 5.6_

- [ ] 9.2 第一章關卡製作
  - **您手動執行 + Claude code 執行：** 完成第一章的 3-5 個關卡設計和實作
  - **您手動執行：** 設計關卡的場景佈局和視覺元素
  - **Claude code 執行：** 實現關卡的敵人配置和彈幕設計
  - _Requirements: 5.1, 5.4, 5.5_

- [ ] 9.3 奇美拉攻城關卡
  - **Claude code 執行：** 實現護送模式的核心邏輯
  - **Claude code 執行：** 創建奇美拉 AI 和玩家保護機制
  - **您手動執行 + Claude code 執行：** 設計攻城關卡的特殊彈幕和挑戰
  - _Requirements: 5.6_

- [ ] 9.4 BOSS 戰系統
  - **Claude code 執行：** 實現 BOSS 敵人的多階段戰鬥系統
  - **Claude code 執行：** 創建 BOSS 的複雜彈幕模式和 AI 行為
  - **您手動執行 + Claude code 執行：** 設計 BOSS 戰的視覺效果和音效
  - _Requirements: 3.1, 3.2, 3.3_

### 10. 劇情對話系統

- [ ] 10.1 對話系統實作
  - **Claude code 執行：** 實現文字對話系統，支援角色頭像和文字效果
  - **Claude code 執行：** 創建對話樹和分支選擇系統
  - **Claude code 執行：** 實現對話的自動播放和手動控制
  - _Requirements: 5.1, 5.2_

- [ ] 10.2 劇情整合
  - **您手動執行：** 將撰寫好的劇情文本整合到遊戲中
  - **Claude code 執行：** 實現劇情觸發點和關卡間的劇情銜接
  - **您手動執行：** 測試劇情流程的完整性和連貫性
  - _Requirements: 5.3_

### 11. UI/UX 系統完善

- [ ] 11.1 主選單系統
  - **Claude code 執行：** 設計並實作主選單、設定介面、章節選擇畫面
  - **Claude code 執行：** 實現選單間的導航和狀態管理
  - **您手動執行：** 設計選單的視覺風格和佈局
  - _Requirements: 7.1, 7.4_

- [ ] 11.2 遊戲內 UI 優化
  - **您手動執行 + Claude code 執行：** 優化遊戲內 HUD 美術風格
  - **Claude code 執行：** 實現技能快捷鍵和滑鼠操作支援
  - **Claude code 執行：** 添加遊戲暫停和設定調整功能
  - _Requirements: 7.2, 7.3_

### 12. 裝備強化系統

- [ ] 12.1 裝備系統基礎
  - **Claude code 執行：** 建立基礎的裝備系統和數據結構
  - **Claude code 執行：** 實現裝備的屬性加成和效果應用
  - **Claude code 執行：** 創建裝備強化介面和邏輯
  - _Requirements: 6.1, 6.2_

- [ ] 12.2 裝備獲取與管理
  - **Claude code 執行：** 實現裝備掉落和獲取系統
  - **Claude code 執行：** 創建裝備背包和管理介面
  - **您手動執行：** 設計裝備的視覺效果和描述文本
  - _Requirements: 8.3, 8.4_

### 13. 音效與音樂整合

- [ ] 13.1 音效系統實作
  - **Claude code 執行：** 為核心動作（射擊、擊中、側跳、技能）配置音效 (SFX)
  - **Claude code 執行：** 實現音效的動態載入和播放管理
  - **您手動執行：** 收集和處理音效資源
  - _Requirements: 9.4_

- [ ] 13.2 背景音樂整合
  - **您手動執行 + AI 工具協作：** 為第一章關卡配置改編後的 BGM
  - **Claude code 執行：** 實現背景音樂的無縫循環和場景切換
  - **您手動執行：** 調整音樂音量和混音效果
  - _Requirements: 9.3_

### 14. 存檔系統實作

- [ ] 14.1 存檔系統開發
  - **Claude code 執行：** 實現遊戲存檔/讀取功能
  - **Claude code 執行：** 創建存檔數據的序列化和反序列化
  - **Claude code 執行：** 實現存檔備份和錯誤恢復機制
  - _Requirements: 8.1, 8.2, 8.3_

- [ ] 14.2 進度管理系統
  - **Claude code 執行：** 實現關卡解鎖和進度追蹤
  - **Claude code 執行：** 創建成就和統計數據記錄
  - **您手動執行：** 測試存檔系統的穩定性和完整性
  - _Requirements: 8.4_

### 15. MVP 整合測試

- [ ] 15.1 系統整合測試
  - **您手動執行：** 進行完整的 MVP 版本測試，確保所有系統正常運作
  - **您手動執行 + Claude code 執行：** 修復發現的 Bug 和性能問題
  - **您手動執行：** 驗證遊戲的完整流程和用戶體驗
  - _Requirements: 所有需求_

- [ ] 15.2 性能優化
  - **Claude code 執行：** 優化彈幕系統和渲染性能
  - **Claude code 執行：** 實現記憶體管理和垃圾回收優化
  - **您手動執行：** 測試遊戲在不同設備上的性能表現
  - _Requirements: 所有需求_

## Phase 3: 搶先體驗版 (EA) 內容製作 (2026/Q3)

### 16. 第二位主角開發

- [ ] 16.1 第二位主角設計
  - **您手動執行 + AI 工具協作：** 確立第二位主角的職業、核心玩法與技能概念
  - **您手動執行 + AI 工具協作：** 設計第二位主角的背景故事和與第一位主角的關聯
  - **您手動執行 + AI 工具協作：** 創建第二位主角的像素美術和動畫
  - _Requirements: 6.1, 6.2, 9.1_

- [ ] 16.2 第二位主角技能實作
  - **Claude code 執行：** 完成第二位主角的技能組、像素美術與動畫整合
  - **Claude code 執行：** 實現第二位主角的獨特玩法機制
  - **您手動執行 + Claude code 執行：** 測試和平衡第二位主角的技能組合
  - _Requirements: 6.3, 6.4_

### 17. 第二位主角故事線

- [ ] 17.1 劇情設計與撰寫
  - **您手動執行 + AI 工具協作：** 確立第二位主角的故事線大綱，並規劃與第一位主角故事線的交集
  - **您手動執行 + AI 工具協作：** 撰寫第二位主角的完整劇情腳本
  - **您手動執行：** 設計故事線間的連接點和共同事件
  - _Requirements: 5.1, 5.2, 5.3_

- [ ] 17.2 第二章關卡製作
  - **您手動執行 + Claude code 執行：** 完成第二位主角的完整故事章節
  - **Claude code 執行：** 實現第二章的關卡邏輯和敵人配置
  - **您手動執行：** 設計第二章的場景美術和視覺效果
  - _Requirements: 5.4, 5.5, 5.6_

### 18. EA 版本整合與測試

- [ ] 18.1 雙主角系統整合
  - **Claude code 執行：** 實現主角選擇和切換系統
  - **Claude code 執行：** 整合兩位主角的存檔和進度系統
  - **您手動執行：** 測試雙主角模式的完整性和平衡性
  - _Requirements: 5.3, 8.1, 8.2_

- [ ] 18.2 EA 版本準備
  - **您手動執行：** 準備 EA 版本的發布材料和說明文檔
  - **您手動執行 + Claude code 執行：** 進行 EA 版本的全面測試和 Bug 修復
  - **您手動執行：** 創建玩家反饋收集機制
  - _Requirements: 所有需求_

這個實作計畫涵蓋了從原型開發到搶先體驗版的完整開發流程，明確區分了需要您手動執行的創意和管理任務，以及需要 AI 協助的程式開發任務。每個任務都參考了對應的需求，確保實作與設計目標一致。